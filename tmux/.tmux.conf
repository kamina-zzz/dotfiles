# tmux.conf

################
# general
################
set -g default-terminal "screen-256color"
set -g terminal-overrides 'xterm:colors=256'

%if #{>=:#{version},3.2}
%if #{||:#{m/ri:mintty|iTerm,#{TERM_PROGRAM}},#{!=:#{XTERM_VERSION},}}
# needed by Control + Shift bindings
set -g extended-keys on
%endif
%endif

# faster command sequences
set -s escape-time 10
# increase repeat timeout
set -sg repeat-time 600
# focus events
set -s focus-events on
# expect UTF-8 (tmux < 2.2)
set -q -g status-utf8 on
setw -q -g utf8 on
# boost history
set -g history-limit 100000

set -g mouse on

################
# binding
################
# binding
unbind C-b
unbind C-s
set -g prefix C-s

#  Prefix + vim のキーバインドでペインを移動する
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

#  Prefix + vim のキーバインドでペインをリサイズする
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# vimのコピーを適用
setw -g mode-keys vi
# vでマーク開始
bind -T copy-mode-vi v send -X begin-selection
# Vで行の先頭からマーク開始
bind -T copy-mode-vi V send -X select-line
# C-vで矩形選択の切り替え
bind -T copy-mode-vi C-v send -X rectangle-toggle
# yでヤンク
bind -T copy-mode-vi y send -X copy-selection
# Yで1行ヤンク
bind -T copy-mode-vi Y send -X copy-line
# C-pでペースト
bind C-p paste-buffer

# 設定ファイルをリロード
bind-key -T prefix r source-file ~/.tmux.conf \; display-message 'Reloard was successful.'

################
# window and pane
################
# start windows numbering at 1
set -g base-index 1
# make pane numbering consistent with windows
setw -g pane-base-index 1

# rename window to reflect current program
setw -g automatic-rename on
# renumber windows when a window is closed
set -g renumber-windows on

# set terminal title
set -g set-titles on

# slightly longer pane indicators display time
set -g display-panes-time 800
# slightly longer status messages display time
set -g display-time 1000
# redraw status line every 10 seconds
set -g status-interval 10

# Prefix + | でペインを垂直分割する
bind | split-window -h -c '#{pane_current_path}'
# Prefix + - でペインを水平分割する
bind - split-window -v -c '#{pane_current_path}'

# ウィンドウリストの色を設定する
setw -g window-status-format "#[fg=colour110,bg=colour234] #I:#W #[default]"

# アクティブウィンドウ
setw -g window-status-current-format "#[fg=colour150,bg=colour234,bright] #I:#W #[default]"

# 左パネルを設定する
set-option -g status-left-length 40

################
# theme
################
set -g status-style "bg=#1e2132"
set -g window-style ""
set -g window-active-style ""

set -g status-style "bg=#1e2132"
set -g status-left-style ""
set -g status-left "#[fg=#c6c8d1]Session: #S #[fg=#6b7089]#I #[fg=#c6c8d1]#P"
set -g status-right-style "fg=#6b7089"
set -g status-right "#[fg=#c6c8d1]%Y-%m-%d(%a) %H:%M"

set -g window-status-current-style "bold"
set -g window-status-style "fg=#6b7089"
set -g window-status-format " #[fg=#c6c8d1]#{?#{==:#W,fish},#{b:pane_current_path},#W}#F "
set -g window-status-current-format " #[fg=#c6c8d1]#{?#{==:#W,fish},#{b:pane_current_path},#W}#F "
set -g window-status-separator ""

set -g pane-active-border-style "fg=#6b7089"
set -g pane-border-style "fg=#6b7089"

################
# clipboard
################
# copy to X11 clipboard
if -b 'command -v xsel > /dev/null 2>&1' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - | xsel -i -b"'
if -b '! command -v xsel > /dev/null 2>&1 && command -v xclip > /dev/null 2>&1' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - | xclip -i -selection clipboard >/dev/null 2>&1"'
# copy to Wayland clipboard
if -b '[ "$XDG_SESSION_TYPE" = "wayland" ] && command -v wl-copy > /dev/null 2>&1' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - | wl-copy"'
# copy to macOS clipboard
if -b 'command -v pbcopy > /dev/null 2>&1' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - | pbcopy"'
# copy to Windows clipboard
if -b 'command -v clip.exe > /dev/null 2>&1' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - | clip.exe"'
if -b '[ -c /dev/clipboard ]' 'bind y run -b "\"\$TMUX_PROGRAM\" \${TMUX_SOCKET:+-S \"\$TMUX_SOCKET\"} save-buffer - > /dev/clipboard"'


